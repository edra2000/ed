<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>تحليل العملات الرقمية</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 20px;
      background-color: #1a1a1a;
      font-family: 'Tajawal', sans-serif;
      color: #ffffff;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    h1 {
      text-align: center;
      color: #4fa8ff;
      margin-bottom: 30px;
    }
    .section {
      margin-bottom: 40px;
    }
    .section-title {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #4fa8ff;
      border-bottom: 1px solid #333;
      padding-bottom: 10px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .card {
      background: #2a2a2a;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }
    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .coin-name {
      font-weight: bold;
      font-size: 18px;
    }
    .coin-value {
      color: #a8e6ff;
      margin: 5px 0;
    }
    .error {
      color: #ff6b6b;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>تحليل العملات الرقمية</h1>
    <div id="content"></div>
  </div>

  <script>
    async function fetchData() {
      try {
        const response = await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=50&page=1');
        const data = await response.json();
        renderData(data);
      } catch (error) {
        document.getElementById('content').innerHTML = `
          <div class="error">
            <p>⚠️ حدث خطأ في جلب البيانات. يرجى المحاولة لاحقًا.</p>
            <p>${error.message}</p>
          </div>
        `;
      }
    }

    function renderData(data) {
      const content = document.getElementById('content');
      
      // تصفية العملات المستقرة
      const stablecoins = ['usdt', 'usdc', 'busd', 'dai', 'tusd'];
      const filtered = data.filter(coin => 
        !stablecoins.includes(coin.symbol.toLowerCase())
      );

      // إنشاء الأقسام
      const sections = [
        {
          title: 'أعلى 5 عملات من حيث القيمة السوقية',
          icon: '💰',
          data: [...filtered].sort((a, b) => b.market_cap - a.market_cap).slice(0, 5)
        },
        {
          title: 'أدنى 5 عملات من حيث القيمة السوقية',
          icon: '📉',
          data: [...filtered].sort((a, b) => a.market_cap - b.market_cap).slice(0, 5)
        }
      ];

      // عرض البيانات
      sections.forEach(section => {
        const sectionHTML = `
          <div class="section">
            <div class="section-title">
              <span>${section.icon}</span>
              <h2>${section.title}</h2>
            </div>
            <div class="grid">
              ${section.data.map(coin => `
                <div class="card">
                  <div class="card-header">
                    <span class="coin-name">${coin.symbol.toUpperCase()}</span>
                    <img src="${coin.image}" width="24" height="24" alt="${coin.symbol}">
                  </div>
                  <div class="coin-value">القيمة السوقية: $${coin.market_cap.toLocaleString()}</div>
                  <div class="coin-value">السعر: $${coin.current_price.toLocaleString()}</div>
                  <div class="coin-value">التداول اليومي: $${coin.total_volume.toLocaleString()}</div>
                </div>
              `).join('')}
            </div>
          </div>
        `;
        content.insertAdjacentHTML('beforeend', sectionHTML);
      });
    }

    // بدء جلب البيانات عند تحميل الصفحة
    document.addEventListener('DOMContentLoaded', fetchData);
  </script>
</body>
</html>
