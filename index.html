<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>تحليل العملات الرقمية</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 40px;
      background-color: #252525;
      font-family: 'Tajawal', sans-serif;
      color: #f0f0f0;
    }

    h2 {
      color: #FFD700;
      margin-top: 40px;
      font-size: 24px;
      border-bottom: 2px solid #FFD700;
      padding-bottom: 5px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .card {
      background-color: #2c2c2c;
      border: 1px solid #3a3a3a;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 0 12px rgba(255, 255, 255, 0.05);
      transition: transform 0.2s;
    }

    .card:hover {
      transform: scale(1.03);
    }

    .card-title {
      font-size: 18px;
      font-weight: 700;
      color: #ffffff;
      margin-bottom: 10px;
    }

    .card-value {
      font-size: 14px;
      color: #b0ffb0;
      margin: 4px 0;
    }
  </style>
</head>
<body>
  <h1 style="color: #FFD700; text-align: center;">تحليل العملات الرقمية</h1>

  <div id="content"></div>

  <script>
    async function fetchData() {
      try {
        const response = await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=250&page=1&sparkline=false');
        const data = await response.json();

        // تصفية البيانات
        const validData = data.filter(coin => coin.market_cap && coin.total_supply && coin.circulating_supply);

        // أعلى 6 عملات من حيث القيمة السوقية
        const topMarketCap = [...validData].sort((a, b) => b.market_cap - a.market_cap).slice(0, 6);

        // أدنى 3 عملات من حيث القيمة السوقية
        const lowMarketCap = [...validData].sort((a, b) => a.market_cap - b.market_cap).slice(0, 3);

        // أعلى 4 عملات من حيث الدعم المجتمعي (باستخدام عدد المتابعين على Reddit كمثال)
        const topCommunitySupport = [...validData]
          .filter(coin => coin.community_data && coin.community_data.reddit_subscribers)
          .sort((a, b) => b.community_data.reddit_subscribers - a.community_data.reddit_subscribers)
          .slice(0, 4);

        // أدنى 5 عملات من حيث الدعم المجتمعي
        const lowCommunitySupport = [...validData]
          .filter(coin => coin.community_data && coin.community_data.reddit_subscribers)
          .sort((a, b) => a.community_data.reddit_subscribers - b.community_data.reddit_subscribers)
          .slice(0, 5);

        // أعلى 6 عملات من حيث العدد المعروض
        const topCirculatingSupply = [...validData].sort((a, b) => b.circulating_supply - a.circulating_supply).slice(0, 6);

        // أدنى 7 عملات من حيث العدد المعروض
        const lowCirculatingSupply = [...validData].sort((a, b) => a.circulating_supply - b.circulating_supply).slice(0, 7);

        const content = document.getElementById('content');

        // دالة لإنشاء قسم
        function createSection(title, items) {
          const section = document.createElement('div');
          const heading = document.createElement('h2');
          heading.textContent = title;
          section.appendChild(heading);

          const grid = document.createElement('div');
          grid.className = 'grid';

          items.forEach(coin => {
            const card = document.createElement('div');
            card.className = 'card';

            const name = document.createElement('div');
            name.className = 'card-title';
            name.textContent = coin.name;

            const marketCap = document.createElement('div');
            marketCap.className = 'card-value';
            marketCap.textContent = 'القيمة السوقية: $' + coin.market_cap.toLocaleString();

            const community = document.createElement('div');
            community.className = 'card-value';
            community.textContent = 'دعم مجتمعي: ' + (coin.community_data && coin.community_data.reddit_subscribers ? coin.community_data.reddit_subscribers.toLocaleString() : 'غير متوفر');

            const supply = document.createElement('div');
            supply.className = 'card-value';
            supply.textContent = 'العدد المعروض: ' + coin.circulating_supply.toLocaleString();

            card.appendChild(name);
            card.appendChild(marketCap);
            card.appendChild(community);
            card.appendChild(supply);

            grid.appendChild(card);
          });

          section.appendChild(grid);
          content.appendChild(section);
        }

        createSection('أعلى 6 عملات من حيث القيمة السوقية', topMarketCap);
        createSection('أدنى 3 عملات من حيث القيمة السوقية', lowMarketCap);
        createSection('أعلى 4 عملات من حيث الدعم المجتمعي', topCommunitySupport);
        createSection('أدنى 5 عملات من حيث الدعم المجتمعي', lowCommunitySupport);
        createSection('أعلى 6 عملات من حيث العدد المعروض', topCirculatingSupply);
        createSection('أدنى 7 عملات من حيث العدد المعروض', lowCirculatingSupply);

      } catch (error) {
        console.error('حدث خطأ أثناء جلب البيانات:', error);
      }
    }

    fetchData();
  </script>
</body>
</html>
